spring:
  jpa:
    # 1. Explicitly tell Hibernate to use PostgreSQL
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      # 2. Usually 'none' or 'update' for multi-tenancy
      ddl-auto: none
    properties:
      hibernate:
        multiTenancy: SCHEMA
        temp:
          use_jdbc_metadata_defaults: false
          # 4. Ensure the dialect is set here as well
          dialect: org.hibernate.dialect.PostgreSQLDialect
  datasource:
    url: jdbc:postgresql://localhost:5432/postgres
    username: postgres
    password: password
  data:
    redis:
      host: localhost
      port: 6379
  kafka:
    bootstrap-servers: localhost:9092
  resilience4j:
    circuitbreaker:
      instances:
        dbService:
          registerHealthIndicator: true
          slidingWindowSize: 10          # Check the last 10 attempts
          failureRateThreshold: 50       # Break if 50% of them fail
          waitDurationInOpenState: 10s   # Wait 10 seconds before trying again
          permittedNumberOfCallsInHalfOpenState: 3